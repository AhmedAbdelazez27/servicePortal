<section>
  <div class="container initiatives">

    <div class="service-info-card mb-4 align-items-center">
      <div class="service-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none">
          <path
            d="M37.8746 10.4055C37.9667 10.4918 37.9667 10.4918 38.0607 10.5798C38.5443 11.0457 38.9611 11.565 39.3746 12.093C39.4143 12.1432 39.454 12.1935 39.4948 12.2453C41.8431 15.2445 43.3926 19.134 43.4996 22.968C43.5021 23.0429 43.5045 23.1177 43.507 23.1949C43.6551 28.4143 41.9483 33.5176 38.3658 37.3633C38.2339 37.5029 38.1012 37.6418 37.9684 37.7805C37.9021 37.8507 37.9021 37.8507 37.8344 37.9222C37.1233 38.6717 36.3651 39.3276 35.5309 39.9368C35.4779 39.9756 35.425 40.0145 35.3704 40.0545C31.35 42.9643 26.1251 44.1945 21.2164 43.4758C20.9239 43.4276 20.6337 43.3719 20.3434 43.3118C20.2406 43.2914 20.2406 43.2914 20.1358 43.2707C18.2802 42.8973 16.2952 42.282 14.7111 41.2225C14.1728 41.0223 13.5129 41.4201 13.0195 41.6283C12.928 41.6664 12.8364 41.7044 12.742 41.7436C12.4494 41.8654 12.1571 41.988 11.8649 42.1106C11.6716 42.1913 11.4783 42.2719 11.285 42.3525C11.1435 42.4114 11.1435 42.4114 10.9991 42.4716C10.6338 42.6238 10.2684 42.7759 9.90296 42.9277C9.74572 42.9931 9.58854 43.0587 9.43147 43.1246C9.23776 43.2056 9.04371 43.2857 8.8495 43.3656C8.74537 43.4088 8.64124 43.452 8.53396 43.4966C7.9343 43.7 7.38098 43.6933 6.80238 43.4348C6.39369 43.1986 6.14978 42.9184 5.99965 42.468C5.93165 41.535 6.05741 40.6614 6.23108 39.7491C6.27393 39.5238 6.31522 39.2983 6.35616 39.0726C6.45788 38.5134 6.56189 37.9547 6.6663 37.3961C6.75508 36.9209 6.84274 36.4455 6.92884 35.9698C6.9694 35.7482 7.01158 35.527 7.05382 35.3058C7.07857 35.1698 7.10323 35.0339 7.1278 34.8979C7.1609 34.7208 7.1609 34.7208 7.19467 34.5402C7.22993 34.0613 7.07356 33.7009 6.83717 33.2933C4.33706 28.8488 3.87815 23.5409 5.23275 18.6598C6.04741 15.8681 7.41339 13.308 9.37465 11.1555C9.47049 11.0483 9.56631 10.9412 9.66212 10.834C10.1611 10.2802 10.6662 9.74661 11.2496 9.2805C11.3357 9.21077 11.4217 9.14104 11.5104 9.0692C17.9821 3.91007 29.1559 2.23595 37.8746 10.4055ZM19.9684 8.06175C19.8888 8.08134 19.8093 8.10094 19.7273 8.12112C16.3434 8.98111 13.1791 10.9905 11.0621 13.7805C10.9965 13.8612 10.9309 13.942 10.8633 14.0251C8.22893 17.3498 7.09705 21.8112 7.57177 26.0024C7.87844 28.3263 8.62613 30.4161 9.75148 32.4617C9.81337 32.5784 9.87526 32.6951 9.93715 32.8118C9.99358 32.9138 10.05 33.0157 10.1082 33.1208C10.3551 33.8987 10.0822 34.8243 9.95143 35.6155C9.93491 35.7174 9.9184 35.8193 9.90138 35.9243C9.84919 36.2462 9.79653 36.5681 9.74379 36.8899C9.69076 37.2144 9.63784 37.5389 9.58519 37.8635C9.55255 38.0646 9.51969 38.2656 9.48659 38.4667C9.47188 38.5572 9.45716 38.6477 9.44201 38.7409C9.42244 38.8602 9.42244 38.8602 9.40249 38.9819C9.36833 39.1987 9.36833 39.1987 9.37465 39.468C9.91671 39.3034 10.4307 39.0995 10.9486 38.8722C11.0847 38.8132 11.2208 38.7543 11.3569 38.6955C11.5667 38.6048 11.776 38.5134 11.9843 38.4196C12.9845 37.9708 13.9809 37.5741 15.0777 37.9701C15.3218 38.0962 15.5453 38.2363 15.7731 38.3899C15.9421 38.4944 16.1115 38.5981 16.2814 38.7012C16.365 38.7522 16.4485 38.8032 16.5346 38.8558C17.7611 39.5703 19.1592 39.981 20.5309 40.3118C20.5988 40.3286 20.6668 40.3454 20.7368 40.3627C22.8097 40.8505 25.4042 40.8247 27.4684 40.3118C27.5466 40.2926 27.6249 40.2735 27.7055 40.2538C30.5059 39.5502 33.0489 38.2718 35.1559 36.2805C35.2863 36.1687 35.4172 36.0573 35.5485 35.9465C36.6521 34.9795 37.5231 33.7006 38.2496 32.4368C38.2808 32.3829 38.312 32.329 38.3441 32.2736C40.5427 28.4393 40.9749 23.8647 39.8258 19.6223C39.5428 18.6303 39.1796 17.702 38.7184 16.7805C38.6733 16.6882 38.6733 16.6882 38.6273 16.594C38.1804 15.6849 37.6453 14.8659 37.0309 14.0618C36.933 13.9321 36.933 13.9321 36.8331 13.7999C34.1184 10.3453 30.0308 8.23583 25.6976 7.70669C25.3867 7.67538 25.0761 7.66793 24.7639 7.66441C24.6959 7.6635 24.6279 7.66258 24.5578 7.66163C22.9935 7.64488 21.4949 7.67828 19.9684 8.06175Z"
            fill="white" />
          <path
            d="M24.9433 19.6516C25.2934 19.9346 25.4697 20.1909 25.5259 20.6476C25.5372 20.9054 25.539 21.1617 25.5379 21.4196C25.5385 21.5174 25.5391 21.6152 25.5398 21.7159C25.5415 22.0385 25.5412 22.3609 25.5406 22.6835C25.5411 22.9081 25.5416 23.1327 25.5421 23.3573C25.543 23.8279 25.5427 24.2984 25.5418 24.769C25.5407 25.3716 25.5426 25.974 25.5453 26.5766C25.5471 27.0404 25.547 27.5042 25.5465 27.968C25.5465 28.1902 25.5471 28.4123 25.5482 28.6344C25.5496 28.9452 25.5486 29.2559 25.547 29.5667C25.5479 29.6582 25.5488 29.7496 25.5498 29.8438C25.5436 30.4137 25.4596 30.7522 25.125 31.218C24.6335 31.5989 24.0318 31.5702 23.4375 31.4993C23.0708 31.3854 22.8419 31.2152 22.6258 30.8911C22.4547 30.4433 22.4599 30.0443 22.4621 29.5688C22.4611 29.4205 22.4611 29.4205 22.4601 29.2692C22.4584 28.9432 22.4588 28.6173 22.4593 28.2912C22.4589 28.0643 22.4584 27.8373 22.4578 27.6104C22.457 27.135 22.4572 26.6597 22.4582 26.1843C22.4592 25.5752 22.4573 24.9662 22.4546 24.3571C22.4529 23.8886 22.4529 23.42 22.4534 22.9515C22.4535 22.7269 22.4529 22.5023 22.4517 22.2778C22.4503 21.9638 22.4513 21.6499 22.4529 21.336C22.452 21.2433 22.4511 21.1507 22.4502 21.0552C22.4561 20.507 22.5124 20.1994 22.875 19.7805C23.4333 19.3617 24.3222 19.3358 24.9433 19.6516Z"
            fill="white" />
          <path
            d="M24.5627 15C25.0206 15.2127 25.2876 15.4796 25.5002 15.9375C25.5709 16.4625 25.5727 16.9064 25.3479 17.3907C24.9191 17.842 24.6275 18.0236 24.0002 18.0469C23.3729 18.0236 23.0813 17.842 22.6525 17.3907C22.4277 16.9064 22.4295 16.4625 22.5002 15.9375C22.92 15.0334 23.639 14.8757 24.5627 15Z"
            fill="white" />
        </svg>
      </div>

      <h4 class="title">{{ 'INITIATIVES.TITLE' | translate }}</h4>
    </div>

    <!-- Loading State -->
    <div *ngIf="loading" class="text-center py-5">
      <div class="spinner-border" role="status">
        <span class="visually-hidden">{{ 'COMMON.LOADING' | translate }}</span>
      </div>
      <p class="mt-3">{{ 'COMMON.LOADING_DATA' | translate }}</p>
    </div>

    <!-- Error State -->
    <div *ngIf="error && !loading" class="text-center py-5">
      <div class="alert alert-danger" role="alert">
        <h5>{{ 'COMMON.ERROR' | translate }}</h5>
        <p>{{ error | translate }}</p>
        <button class="btn btn-primary" (click)="retryLoad()">
          {{ 'COMMON.REFRESH' | translate }}
        </button>
      </div>
    </div>

    <!-- Content -->
    <!-- <div *ngIf="!loading && !error" class="row">
      <div *ngFor="let initiative of initiatives" class="col-xl-4 col-lg-6 mb-4">
        <div class="service-box" (click)="onInitiativeClick(initiative)">
          <div class="mb-3">
            <img [src]="getInitiativeImage(initiative)" 
                 [alt]="getInitiativeName(initiative)"
                 class="w-100 initiative-image"
                 (error)="onImageError($event)">
          </div>
                 <span class="mb-3 d-block initiative-title" [innerHTML]="getInitiativeName(initiative)"></span>

                 <p class="mb-4 initiative-description" [innerHTML]="getInitiativeDescription(initiative)"></p>

           <div class="d-flex justify-content-end">
            <button class="btn btn-link" (click)="onInitiativeClick(initiative)">
              {{ 'COMMON.VIEW' | translate }}
              <svg xmlns="http://www.w3.org/2000/svg" width="7" height="12" viewBox="0 0 7 12" fill="none">
                <path d="M1.1665 11L6.1665 6L1.1665 1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div> -->

    <!-- <div *ngIf="!loading && !error" class="row align-items-stretch">
      <div *ngFor="let initiative of initiatives" class="col mb-4  d-flex">
        <div class="service-box flex-fill d-flex flex-column" (click)="onInitiativeClick(initiative)">
          <div class="mb-3">
            <img [src]="getInitiativeImage(initiative)" [alt]="getInitiativeName(initiative)"
              class="w-100 initiative-image" (error)="onImageError($event)">
          </div>

          <span class="mb-3 d-block initiative-title" [innerHTML]="getInitiativeName(initiative)"></span>
          <p *ngIf="lang == 'ar'">{{ initiative.descriptionAr | cleanHtml:{ maxLength: 150 } }}</p>
          <p *ngIf="lang == 'en'">{{ initiative.descriptionEn | cleanHtml:{ maxLength: 150 } }}</p>

          <div class="d-flex justify-content-end align-items-end mt-auto">
            <button class="btn btn-link" (click)="onInitiativeClick(initiative)">
              {{ 'COMMON.VIEW' | translate }}
              <svg xmlns="http://www.w3.org/2000/svg" width="7" height="12" viewBox="0 0 7 12" fill="none">
                <path d="M1.1665 11L6.1665 6L1.1665 1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                  stroke-linejoin="round" />
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div> -->



    <div *ngIf="!loading && !error" class="row align-items-stretch">
      <div *ngFor="let initiative of initiatives" class="col-xl-4 col-lg-6 mb-4 d-flex">
        <div class="service-box flex-fill d-flex flex-column" (click)="onInitiativeClick(initiative)">
          <div class="mb-3">
            <img [src]="getInitiativeImage(initiative)" [alt]="getInitiativeName(initiative)"
              class="w-100 initiative-image" (error)="onImageError($event)">
          </div>

          <span class="mb-3 d-block initiative-title" [innerHTML]="getInitiativeName(initiative)"></span>
          <!-- <p class="mb-4 initiative-description flex-grow-1" [innerHTML]="getInitiativeDescription(initiative)"></p> -->

           <p class="mb-4 initiative-description flex-grow-1" style="overflow-x: hidden;" *ngIf="lang == 'ar'">{{ initiative.descriptionAr | cleanHtml:{ maxLength: 150 } }}</p>
          <p class="mb-4 initiative-description flex-grow-1" style="overflow-x: hidden;" *ngIf="lang == 'en'">{{ initiative.descriptionEn | cleanHtml:{ maxLength: 150 } }}</p>


          <div class="d-flex justify-content-end align-items-end mt-auto">
            <button class="btn btn-link" (click)="onInitiativeClick(initiative)">
              {{ 'COMMON.VIEW' | translate }}
              <svg xmlns="http://www.w3.org/2000/svg" width="7" height="12" viewBox="0 0 7 12" fill="none">
                <path d="M1.1665 11L6.1665 6L1.1665 1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                  stroke-linejoin="round" />
              </svg>
            </button>
          </div>
        </div>
      </div>

    </div>


    <!-- No Data State -->
    <div *ngIf="!loading && !error && initiatives.length === 0" class="text-center py-5">
      <div class="alert alert-info" role="alert">
        <h5>{{ 'INITIATIVES.NO_INITIATIVES' | translate }}</h5>
        <p>{{ 'INITIATIVES.NO_INITIATIVES_DESCRIPTION' | translate }}</p>
      </div>
    </div>
  </div>
</section>
