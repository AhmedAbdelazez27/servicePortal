<section>
  <div class="container services">
 
    <!-- Loading State -->
    <div *ngIf="loading" class="text-center py-5">
      <div class="spinner-border" role="status">
        <span class="visually-hidden">{{ 'COMMON.LOADING' | translate }}</span>
      </div>
      <p class="mt-3">{{ 'COMMON.LOADING_DATA' | translate }}</p>
    </div>

    <!-- Error State -->
    <div *ngIf="error && !loading" class="text-center py-5">
      <div class="alert alert-danger" role="alert">
        <h5>{{ 'COMMON.ERROR' | translate }}</h5>
        <p>{{ error | translate }}</p>
        <button class="btn btn-outline-danger ms-3" (click)="retryLoad()">
          {{ 'COMMON.REFRESH' | translate }}
        </button>
      </div>
    </div>

    <div *ngIf="!loading && !error && initiative">

      <!-- <nav aria-label="breadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item"><a routerLink="/initiatives">{{'INITIATIVES.TITLE'|translate}}</a></li>
            <li class="breadcrumb-item active" aria-current="page">{{ getInitiativeName(initiative) }}</li>
          </ol>
        </nav> -->
      <nav [attr.aria-label]="'BREADCRUMB.ARIA' | translate" [attr.dir]="(lang$ | async) === 'ar' ? 'rtl' : 'ltr'">
        <ol class="breadcrumb">
          <li class="breadcrumb-item">
            <a routerLink="/initiatives">{{ 'INITIATIVES.TITLE' | translate }}</a>
          </li>
          <li class="breadcrumb-item active" >
            {{ getInitiativeName(initiative) }}
          </li>
        </ol>
      </nav>

      
      <!-- Content -->
      <div class="row">
        <!-- Initiative Image -->
        <div class="col-12 mb-5">
          <h4 class="gold">{{ getInitiativeName(initiative) }}</h4>

          <img style="height: 500px; object-fit: cover;" [src]="getInitiativeImage(initiative)" [alt]="getInitiativeName(initiative)"
            class="w-100 rounded-3 initiative-image" (error)="onImageError($event)" />

          <!-- Date and Target Group below the image -->
          <div class="mt-2 mb-4 d-flex gap-3 align-items-center">
            <!-- Initiative Date -->
            <div class="initiative-date" *ngIf="getInitiativeDate(initiative)">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <g clip-path="url(#clip0_542_1654)">
                  <path
                    d="M19 2H18V1C18 0.734784 17.8946 0.48043 17.7071 0.292893C17.5196 0.105357 17.2652 0 17 0C16.7348 0 16.4804 0.105357 16.2929 0.292893C16.1054 0.48043 16 0.734784 16 1V2H8V1C8 0.734784 7.89464 0.48043 7.70711 0.292893C7.51957 0.105357 7.26522 0 7 0C6.73478 0 6.48043 0.105357 6.29289 0.292893C6.10536 0.48043 6 0.734784 6 1V2H5C3.6744 2.00159 2.40356 2.52888 1.46622 3.46622C0.528882 4.40356 0.00158786 5.6744 0 7L0 19C0.00158786 20.3256 0.528882 21.5964 1.46622 22.5338C2.40356 23.4711 3.6744 23.9984 5 24H19C20.3256 23.9984 21.5964 23.4711 22.5338 22.5338C23.4711 21.5964 23.9984 20.3256 24 19V7C23.9984 5.6744 23.4711 4.40356 22.5338 3.46622C21.5964 2.52888 20.3256 2.00159 19 2V2ZM2 7C2 6.20435 2.31607 5.44129 2.87868 4.87868C3.44129 4.31607 4.20435 4 5 4H19C19.7956 4 20.5587 4.31607 21.1213 4.87868C21.6839 5.44129 22 6.20435 22 7V8H2V7ZM19 22H5C4.20435 22 3.44129 21.6839 2.87868 21.1213C2.31607 20.5587 2 19.7956 2 19V10H22V19C22 19.7956 21.6839 20.5587 21.1213 21.1213C20.5587 21.6839 19.7956 22 19 22Z"
                    fill="white" />
                  <path
                    d="M12 16.5C12.8284 16.5 13.5 15.8284 13.5 15C13.5 14.1716 12.8284 13.5 12 13.5C11.1716 13.5 10.5 14.1716 10.5 15C10.5 15.8284 11.1716 16.5 12 16.5Z"
                    fill="white" />
                  <path
                    d="M6.99988 16.5C7.82831 16.5 8.49988 15.8284 8.49988 15C8.49988 14.1716 7.82831 13.5 6.99988 13.5C6.17145 13.5 5.49988 14.1716 5.49988 15C5.49988 15.8284 6.17145 16.5 6.99988 16.5Z"
                    fill="white" />
                  <path
                    d="M17.0001 16.5C17.8285 16.5 18.5001 15.8284 18.5001 15C18.5001 14.1716 17.8285 13.5 17.0001 13.5C16.1717 13.5 15.5001 14.1716 15.5001 15C15.5001 15.8284 16.1717 16.5 17.0001 16.5Z"
                    fill="white" />
                </g>
                <defs>
                  <clipPath id="clip0_542_1654">
                    <rect width="24" height="24" fill="white" />
                  </clipPath>
                </defs>
              </svg>
              {{ getInitiativeDate(initiative) }}
            </div>

            <!-- Target Group -->
            
            
          </div>

        </div>

        <!-- Target Group Section -->
        <div class="col-12 mb-5">
          <div class="header-section clean-layout">
            <h1 class="main-title mt-2 mb-4 d-flex gap-3 align-items-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none">
                  <path d="M18.0003 7.90977C17.9703 7.90977 17.9503 7.90977 17.9203 7.90977H17.8703C15.9803 7.84977 14.5703 6.38977 14.5703 4.58977C14.5703 2.74977 16.0703 1.25977 17.9003 1.25977C19.7303 1.25977 21.2303 2.75977 21.2303 4.58977C21.2203 6.39977 19.8103 7.85977 18.0103 7.91977C18.0103 7.90977 18.0103 7.90977 18.0003 7.90977ZM17.9003 2.74977C16.8903 2.74977 16.0703 3.56977 16.0703 4.57977C16.0703 5.56977 16.8403 6.36977 17.8303 6.40977C17.8403 6.39977 17.9203 6.39977 18.0103 6.40977C18.9803 6.35977 19.7303 5.55977 19.7403 4.57977C19.7403 3.56977 18.9203 2.74977 17.9003 2.74977Z" fill="#8D734D"/>
                  <path d="M18.0105 15.2797C17.6205 15.2797 17.2305 15.2497 16.8405 15.1797C16.4305 15.1097 16.1605 14.7197 16.2305 14.3097C16.3005 13.8997 16.6905 13.6297 17.1005 13.6997C18.3305 13.9097 19.6305 13.6797 20.5005 13.0997C20.9705 12.7897 21.2205 12.3997 21.2205 12.0097C21.2205 11.6197 20.9605 11.2397 20.5005 10.9297C19.6305 10.3497 18.3105 10.1197 17.0705 10.3397C16.6605 10.4197 16.2705 10.1397 16.2005 9.72966C16.1305 9.31966 16.4005 8.92966 16.8105 8.85966C18.4405 8.56966 20.1305 8.87965 21.3305 9.67965C22.2105 10.2697 22.7205 11.1097 22.7205 12.0097C22.7205 12.8997 22.2205 13.7497 21.3305 14.3497C20.4205 14.9497 19.2405 15.2797 18.0105 15.2797Z" fill="#8D734D"/>
                  <path d="M5.97047 7.91C5.96047 7.91 5.95047 7.91 5.95047 7.91C4.15047 7.85 2.74047 6.39 2.73047 4.59C2.73047 2.75 4.23047 1.25 6.06047 1.25C7.89047 1.25 9.39047 2.75 9.39047 4.58C9.39047 6.39 7.98047 7.85 6.18047 7.91L5.97047 7.16L6.04047 7.91C6.02047 7.91 5.99047 7.91 5.97047 7.91ZM6.07047 6.41C6.13047 6.41 6.18047 6.41 6.24047 6.42C7.13047 6.38 7.91047 5.58 7.91047 4.59C7.91047 3.58 7.09047 2.75999 6.08047 2.75999C5.07047 2.75999 4.25047 3.58 4.25047 4.59C4.25047 5.57 5.01047 6.36 5.98047 6.42C5.99047 6.41 6.03047 6.41 6.07047 6.41Z" fill="#8D734D"/>
                  <path d="M5.96 15.2797C4.73 15.2797 3.55 14.9497 2.64 14.3497C1.76 13.7597 1.25 12.9097 1.25 12.0097C1.25 11.1197 1.76 10.2697 2.64 9.67965C3.84 8.87965 5.53 8.56966 7.16 8.85966C7.57 8.92966 7.84 9.31966 7.77 9.72966C7.7 10.1397 7.31 10.4197 6.9 10.3397C5.66 10.1197 4.35 10.3497 3.47 10.9297C3 11.2397 2.75 11.6197 2.75 12.0097C2.75 12.3997 3.01 12.7897 3.47 13.0997C4.34 13.6797 5.64 13.9097 6.87 13.6997C7.28 13.6297 7.67 13.9097 7.74 14.3097C7.81 14.7197 7.54 15.1097 7.13 15.1797C6.74 15.2497 6.35 15.2797 5.96 15.2797Z" fill="#8D734D"/>
                  <path d="M12.0003 15.3805C11.9703 15.3805 11.9503 15.3805 11.9203 15.3805H11.8703C9.98031 15.3205 8.57031 13.8605 8.57031 12.0605C8.57031 10.2205 10.0703 8.73047 11.9003 8.73047C13.7303 8.73047 15.2303 10.2305 15.2303 12.0605C15.2203 13.8705 13.8103 15.3305 12.0103 15.3905C12.0103 15.3805 12.0103 15.3805 12.0003 15.3805ZM11.9003 10.2205C10.8903 10.2205 10.0703 11.0405 10.0703 12.0505C10.0703 13.0405 10.8403 13.8405 11.8303 13.8805C11.8403 13.8705 11.9203 13.8705 12.0103 13.8805C12.9803 13.8305 13.7303 13.0305 13.7403 12.0505C13.7403 11.0505 12.9203 10.2205 11.9003 10.2205Z" fill="#8D734D"/>
                  <path d="M11.9993 22.7597C10.7993 22.7597 9.5993 22.4497 8.6693 21.8197C7.7893 21.2297 7.2793 20.3897 7.2793 19.4897C7.2793 18.5997 7.7793 17.7397 8.6693 17.1497C10.5393 15.9097 13.4693 15.9097 15.3293 17.1497C16.2093 17.7397 16.7193 18.5797 16.7193 19.4797C16.7193 20.3697 16.2193 21.2297 15.3293 21.8197C14.3993 22.4397 13.1993 22.7597 11.9993 22.7597ZM9.4993 18.4097C9.0293 18.7197 8.7793 19.1097 8.7793 19.4997C8.7793 19.8897 9.0393 20.2697 9.4993 20.5797C10.8493 21.4897 13.1393 21.4897 14.4893 20.5797C14.9593 20.2697 15.2093 19.8797 15.2093 19.4897C15.2093 19.0997 14.9493 18.7197 14.4893 18.4097C13.1493 17.4997 10.8593 17.5097 9.4993 18.4097Z" fill="#8D734D"/>
                </svg>
                {{'INITIATIVES.TARGET_GROUP' | translate}}
            </h1>
            
            <p class="subtitle">
                {{ getTargetGroup(initiative) }}
            </p>
          </div>
        </div>

        <!-- Initiative Description -->
        <div class="col-12 mb-5">
          <div class="header-section clean-layout">
            <h5 class="main-title mt-2 mb-4 d-flex gap-3 align-items-center">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" class="me-2">
                <path d="M14 2H6C4.89543 2 4 2.89543 4 4V20C4 21.1046 4.89543 22 6 22H18C19.1046 22 20 21.1046 20 20V8L14 2Z" stroke="#8D734D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M14 2V8H20" stroke="#8D734D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M16 13H8" stroke="#8D734D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M16 17H8" stroke="#8D734D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M10 9H9H8" stroke="#8D734D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              {{ 'Common.DESCRIPTION' | translate }}
            </h5>
            <!-- <p class="subtitle">
              {{ getInitiativeDescription(initiative) }}
            </p> -->
            <div class="initiative-description mb-1"
                                [innerHTML]="getInitiativeDescription(initiative)">
                            </div>
          </div>
        </div>




        <!-- Map Section -->
        <div class="col-xl-12 mb-5" *ngIf="initiative.initiativeDetails && initiative.initiativeDetails.length > 0">
          <h5 class="mb-3 gold">{{ 'INITIATIVES.LOCATIONS' | translate }}</h5>
          <div id="initiative-map"></div>

          <!-- Location List -->
          <div class="mt-4">
            <h6>{{ 'INITIATIVES.LOCATION_DETAILS' | translate }}</h6>
            <div class="row">
              <div *ngFor="let location of initiative.initiativeDetails; let i = index" class="col-xl-6 col-lg-6 mb-3">
                <div *ngIf="location.isActive" class="location-card p-3 border rounded">
                  <h6 class="location-name">{{ getLocationName(location) }}</h6>
                  <p class="mb-2">{{ 'INITIATIVES.LOCATION' | translate }} #{{ i + 1 }}</p>
                  <button class="btn btn-sm btn-outline-brown"
                    (click)="openLocationInGoogleMaps(location.locationCoordinates)">
                    {{ 'COMMON.OPEN_IN_GOOGLE_MAPS' | translate }}
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>



    <!-- Navigation Buttons -->
    <!-- <div *ngIf="!loading && !error" class="mt-4 d-flex gap-3">
      <button class="btn btn-outline-secondary" (click)="onBackToInitiatives()">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" class="me-2">
          <path d="M19 12H5M12 19L5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round"
            stroke-linejoin="round" />
        </svg>
        {{ 'COMMON.BACK_TO_INITIATIVES' | translate }}
      </button>

      <button class="btn btn-outline-primary" (click)="onBackToHome()">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" class="me-2">
          <path
            d="M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          <path d="M9 22V12H15V22" stroke="currentColor" stroke-width="2" stroke-linecap="round"
            stroke-linejoin="round" />
        </svg>
        {{ 'COMMON.BACK_TO_HOME' | translate }}
      </button>
    </div> -->
  </div>
</section>