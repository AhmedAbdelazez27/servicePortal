<section>
  <div class="container services">
    <h4 class="title">{{ 'CHARITY_ORGANIZATIONS.TITLE' | translate }}</h4>

    <!-- Loading State -->
    <div *ngIf="loading" class="text-center py-5">
      <div class="spinner-border" role="status">
        <span class="visually-hidden">{{ 'COMMON.LOADING' | translate }}</span>
      </div>
      <p class="mt-3">{{ 'COMMON.LOADING_DATA' | translate }}</p>
    </div>

    <!-- Error State -->
    <div *ngIf="error && !loading" class="text-center py-5">
      <div class="alert alert-danger" role="alert">
        <h5>{{ 'COMMON.ERROR' | translate }}</h5>
        <p>{{ error | translate }}</p>
        <button class="btn btn-primary" (click)="retryLoad()">
          {{ 'COMMON.REFRESH' | translate }}
        </button>
      </div>
    </div>

    <!-- Content -->
    <div *ngIf="!loading && !error" class="row">
      <div *ngFor="let entity of entities" class="col-xl-4 col-lg-6 mb-4">
        <div class="service-box" (click)="onEntityClick(entity)">
          <div class="mb-3">
            <img [src]="getEntityImage(entity)" [alt]="getEntityName(entity)" class="w-100 entity-image"
              (error)="onImageError($event)">
          </div>
          <span class="mb-3 d-block entity-title">{{ getEntityName(entity) }}</span>
          <p class="mb-4 entity-description">{{ getEntityDescription(entity) }}</p>
          <!-- <p class="mb-4 entity-description">{{ getEntitymobile(entity) }}</p>
                    <p class="mb-4 entity-description">{{ getEntityweb(entity) }}</p>
                    <p   class="mb-4 entity-description">{{ getEntityloc(entity) }}</p> -->
          <ul class="entity-meta list-unstyled mb-4">
           
            <li *ngIf="getEntitymobile(entity)" class="meta-line">
              <svg width="16" height="16" viewBox="0 0 16 16" aria-hidden="true">
                <path d="M5 1h6a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zm0 2v10h6V3H5z" />
              </svg>
              <a [href]="'tel:' + getEntitymobile(entity)" class="meta-text" dir="ltr"
                (click)="$event.stopPropagation()">
                {{ getEntitymobile(entity) }}
              </a>
            </li>

          
            <li *ngIf="getEntityweb(entity)" class="meta-line">
              <svg width="16" height="16" viewBox="0 0 16 16" aria-hidden="true">
                <path
                  d="M8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1zm0 1.5a5.5 5.5 0 0 1 5.36 4.25H8.75c-.12-1.66-.44-3.02-.92-4.25h.17zM7.25 2.5c-.48 1.23-.8 2.59-.92 4.25H2.64A5.5 5.5 0 0 1 7.25 2.5zM2.5 8c0-.3.02-.6.07-.88h3.76c.03.6.09 1.17.18 1.7H2.72c-.14-.27-.22-.55-.22-.82zm.14 1.7h3.73c.2.88.48 1.66.83 2.3A5.5 5.5 0 0 1 2.64 9.7zm6.11 2.3c.35-.64.63-1.42.83-2.3h3.73A5.5 5.5 0 0 1 8.75 12zm1.03-3.7c.09-.53.15-1.1.18-1.7h3.76c.05.28.07.58.07.88 0 .27-.08.55-.22.82H9.78z" />
              </svg>
              <a [href]="normalizeUrl(getEntityweb(entity))" target="_blank" rel="noopener" class="meta-text" dir="ltr"
                (click)="$event.stopPropagation()">
                {{ getEntityweb(entity) }}
              </a>
            </li>

          
            <li *ngIf="getEntityloc(entity)" class="meta-line">
              <svg width="16" height="16" viewBox="0 0 16 16" aria-hidden="true">
                <path
                  d="M8 1a5 5 0 0 1 5 5c0 3.5-5 9-5 9S3 9.5 3 6a5 5 0 0 1 5-5zm0 2a3 3 0 1 0 .001 6.001A3 3 0 0 0 8 3z" />
              </svg>
              <a [href]="normalizeUrl(getEntityloc(entity))" target="_blank" rel="noopener" class="meta-text" dir="ltr"
                (click)="$event.stopPropagation()">
                {{ getEntityloc(entity) }}
              </a>
            </li>
          </ul>




          <div class="d-flex justify-content-end">
            <!-- <button class="btn btn-link">
              {{ 'COMMON.VIEW' | translate }}
              <svg xmlns="http://www.w3.org/2000/svg" width="7" height="12" viewBox="0 0 7 12" fill="none">
                <path d="M1.1665 11L6.1665 6L1.1665 1" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
            </button> -->
          </div>
        </div>
      </div>
    </div>

    <!-- No Data State -->
    <div *ngIf="!loading && !error && entities.length === 0" class="text-center py-5">
      <div class="alert alert-info" role="alert">
        <h5>{{ 'CHARITY_ORGANIZATIONS.NO_ORGANIZATIONS' | translate }}</h5>
        <p>{{ 'CHARITY_ORGANIZATIONS.NO_ORGANIZATIONS_DESCRIPTION' | translate }}</p>
      </div>
    </div>
  </div>
</section>