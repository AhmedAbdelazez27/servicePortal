<div class="registration-container">
  <section>
    <div class="container">
         <div class="service-info-card mb-4 align-items-center">
           <div class="service-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none">
            <path d="M37.8746 10.4055C37.9667 10.4918 37.9667 10.4918 38.0607 10.5798C38.5443 11.0457 38.9611 11.565 39.3746 12.093C39.4143 12.1432 39.454 12.1935 39.4948 12.2453C41.8431 15.2445 43.3926 19.134 43.4996 22.968C43.5021 23.0429 43.5045 23.1177 43.507 23.1949C43.6551 28.4143 41.9483 33.5176 38.3658 37.3633C38.2339 37.5029 38.1012 37.6418 37.9684 37.7805C37.9021 37.8507 37.9021 37.8507 37.8344 37.9222C37.1233 38.6717 36.3651 39.3276 35.5309 39.9368C35.4779 39.9756 35.425 40.0145 35.3704 40.0545C31.35 42.9643 26.1251 44.1945 21.2164 43.4758C20.9239 43.4276 20.6337 43.3719 20.3434 43.3118C20.2406 43.2914 20.2406 43.2914 20.1358 43.2707C18.2802 42.8973 16.2952 42.282 14.7111 41.2225C14.1728 41.0223 13.5129 41.4201 13.0195 41.6283C12.928 41.6664 12.8364 41.7044 12.742 41.7436C12.4494 41.8654 12.1571 41.988 11.8649 42.1106C11.6716 42.1913 11.4783 42.2719 11.285 42.3525C11.1435 42.4114 11.1435 42.4114 10.9991 42.4716C10.6338 42.6238 10.2684 42.7759 9.90296 42.9277C9.74572 42.9931 9.58854 43.0587 9.43147 43.1246C9.23776 43.2056 9.04371 43.2857 8.8495 43.3656C8.74537 43.4088 8.64124 43.452 8.53396 43.4966C7.9343 43.7 7.38098 43.6933 6.80238 43.4348C6.39369 43.1986 6.14978 42.9184 5.99965 42.468C5.93165 41.535 6.05741 40.6614 6.23108 39.7491C6.27393 39.5238 6.31522 39.2983 6.35616 39.0726C6.45788 38.5134 6.56189 37.9547 6.6663 37.3961C6.75508 36.9209 6.84274 36.4455 6.92884 35.9698C6.9694 35.7482 7.01158 35.527 7.05382 35.3058C7.07857 35.1698 7.10323 35.0339 7.1278 34.8979C7.1609 34.7208 7.1609 34.7208 7.19467 34.5402C7.22993 34.0613 7.07356 33.7009 6.83717 33.2933C4.33706 28.8488 3.87815 23.5409 5.23275 18.6598C6.04741 15.8681 7.41339 13.308 9.37465 11.1555C9.47049 11.0483 9.56631 10.9412 9.66212 10.834C10.1611 10.2802 10.6662 9.74661 11.2496 9.2805C11.3357 9.21077 11.4217 9.14104 11.5104 9.0692C17.9821 3.91007 29.1559 2.23595 37.8746 10.4055ZM19.9684 8.06175C19.8888 8.08134 19.8093 8.10094 19.7273 8.12112C16.3434 8.98111 13.1791 10.9905 11.0621 13.7805C10.9965 13.8612 10.9309 13.942 10.8633 14.0251C8.22893 17.3498 7.09705 21.8112 7.57177 26.0024C7.87844 28.3263 8.62613 30.4161 9.75148 32.4617C9.81337 32.5784 9.87526 32.6951 9.93715 32.8118C9.99358 32.9138 10.05 33.0157 10.1082 33.1208C10.3551 33.8987 10.0822 34.8243 9.95143 35.6155C9.93491 35.7174 9.9184 35.8193 9.90138 35.9243C9.84919 36.2462 9.79653 36.5681 9.74379 36.8899C9.69076 37.2144 9.63784 37.5389 9.58519 37.8635C9.55255 38.0646 9.51969 38.2656 9.48659 38.4667C9.47188 38.5572 9.45716 38.6477 9.44201 38.7409C9.42244 38.8602 9.42244 38.8602 9.40249 38.9819C9.36833 39.1987 9.36833 39.1987 9.37465 39.468C9.91671 39.3034 10.4307 39.0995 10.9486 38.8722C11.0847 38.8132 11.2208 38.7543 11.3569 38.6955C11.5667 38.6048 11.776 38.5134 11.9843 38.4196C12.9845 37.9708 13.9809 37.5741 15.0777 37.9701C15.3218 38.0962 15.5453 38.2363 15.7731 38.3899C15.9421 38.4944 16.1115 38.5981 16.2814 38.7012C16.365 38.7522 16.4485 38.8032 16.5346 38.8558C17.7611 39.5703 19.1592 39.981 20.5309 40.3118C20.5988 40.3286 20.6668 40.3454 20.7368 40.3627C22.8097 40.8505 25.4042 40.8247 27.4684 40.3118C27.5466 40.2926 27.6249 40.2735 27.7055 40.2538C30.5059 39.5502 33.0489 38.2718 35.1559 36.2805C35.2863 36.1687 35.4172 36.0573 35.5485 35.9465C36.6521 34.9795 37.5231 33.7006 38.2496 32.4368C38.2808 32.3829 38.312 32.329 38.3441 32.2736C40.5427 28.4393 40.9749 23.8647 39.8258 19.6223C39.5428 18.6303 39.1796 17.702 38.7184 16.7805C38.6733 16.6882 38.6733 16.6882 38.6273 16.594C38.1804 15.6849 37.6453 14.8659 37.0309 14.0618C36.933 13.9321 36.933 13.9321 36.8331 13.7999C34.1184 10.3453 30.0308 8.23583 25.6976 7.70669C25.3867 7.67538 25.0761 7.66793 24.7639 7.66441C24.6959 7.6635 24.6279 7.66258 24.5578 7.66163C22.9935 7.64488 21.4949 7.67828 19.9684 8.06175Z" fill="white"/>
            <path d="M24.9433 19.6516C25.2934 19.9346 25.4697 20.1909 25.5259 20.6476C25.5372 20.9054 25.539 21.1617 25.5379 21.4196C25.5385 21.5174 25.5391 21.6152 25.5398 21.7159C25.5415 22.0385 25.5412 22.3609 25.5406 22.6835C25.5411 22.9081 25.5416 23.1327 25.5421 23.3573C25.543 23.8279 25.5427 24.2984 25.5418 24.769C25.5407 25.3716 25.5426 25.974 25.5453 26.5766C25.5471 27.0404 25.547 27.5042 25.5465 27.968C25.5465 28.1902 25.5471 28.4123 25.5482 28.6344C25.5496 28.9452 25.5486 29.2559 25.547 29.5667C25.5479 29.6582 25.5488 29.7496 25.5498 29.8438C25.5436 30.4137 25.4596 30.7522 25.125 31.218C24.6335 31.5989 24.0318 31.5702 23.4375 31.4993C23.0708 31.3854 22.8419 31.2152 22.6258 30.8911C22.4547 30.4433 22.4599 30.0443 22.4621 29.5688C22.4611 29.4205 22.4611 29.4205 22.4601 29.2692C22.4584 28.9432 22.4588 28.6173 22.4593 28.2912C22.4589 28.0643 22.4584 27.8373 22.4578 27.6104C22.457 27.135 22.4572 26.6597 22.4582 26.1843C22.4592 25.5752 22.4573 24.9662 22.4546 24.3571C22.4529 23.8886 22.4529 23.42 22.4534 22.9515C22.4535 22.7269 22.4529 22.5023 22.4517 22.2778C22.4503 21.9638 22.4513 21.6499 22.4529 21.336C22.452 21.2433 22.4511 21.1507 22.4502 21.0552C22.4561 20.507 22.5124 20.1994 22.875 19.7805C23.4333 19.3617 24.3222 19.3358 24.9433 19.6516Z" fill="white"/>
            <path d="M24.5627 15C25.0206 15.2127 25.2876 15.4796 25.5002 15.9375C25.5709 16.4625 25.5727 16.9064 25.3479 17.3907C24.9191 17.842 24.6275 18.0236 24.0002 18.0469C23.3729 18.0236 23.0813 17.842 22.6525 17.3907C22.4277 16.9064 22.4295 16.4625 22.5002 15.9375C22.92 15.0334 23.639 14.8757 24.5627 15Z" fill="white"/>
          </svg>
        </div>

     <h4 class="title">{{ 'AUTH.LOGIN.REGISTRATION_INSTITUTIONS' | translate }}</h4>

        </div>

      <div class="row">
        <div class="col-xl-1"></div>
        <div class="col-xl-10">
          <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()">
            
            <!-- Basic Information -->
            <div class="login-box mb-4">
              <h2 class="title gold mb-4">{{ 'REGISTRATION.BASIC_INFO' | translate }}</h2>
              
              <!-- Row 1: Foundation Type & Entity -->
              

              <!-- Row 2: Foundation Name & License Number -->
              

              <!-- Row 3: License End Date & English Name -->
              <div class="row">
              
                <div class="col-xl-6">
                  <div class="mb-4">
                    <label for="nameEn" class="form-label">{{ 'REGISTRATION.ENGLISH_NAME' | translate }} *</label>
                    <input 
                      type="text" 
                      class="form-control" 
                      id="nameEn" 
                      formControlName="nameEn"
                      [class.is-invalid]="isFieldInvalid('nameEn')"
                      placeholder="{{ 'REGISTRATION.ENTER_ENGLISH_NAME' | translate }}">
                    <div class="invalid-feedback" *ngIf="isFieldInvalid('nameEn')">
                      {{ getFieldError('nameEn') }}
                    </div>
                  </div>
                </div>
              
                <div class="col-xl-6">
                  <div class="mb-4">
                    <label for="name" class="form-label">{{ 'REGISTRATION.ARABIC_NAME' | translate }} *</label>
                    <input 
                      type="text" 
                      class="form-control" 
                      id="name" 
                      formControlName="name"
                      [class.is-invalid]="isFieldInvalid('name')"
                      placeholder="{{ 'REGISTRATION.ENTER_ARABIC_NAME' | translate }}">
                    <div class="invalid-feedback" *ngIf="isFieldInvalid('name')">
                      {{ getFieldError('name') }}
                    </div>
                  </div>
                </div>
                <div class="col-xl-6">
                  <div class="mb-4">
                    <label for="userName" class="form-label">{{ 'REGISTRATION.USERNAME' | translate }} *</label>
                    <input 
                      type="text" 
                      class="form-control" 
                      id="userName" 
                      formControlName="userName"
                      [class.is-invalid]="isFieldInvalid('userName')"
                      placeholder="{{ 'REGISTRATION.ENTER_USERNAME' | translate }}">
                    <div class="invalid-feedback" *ngIf="isFieldInvalid('userName')">
                      {{ getFieldError('userName') }}
                    </div>
                  </div>
                </div>
                <div class="col-xl-6">
                  <div class="mb-4">
                    <label for="civilId" class="form-label">{{ 'REGISTRATION.CIVIL_ID' | translate }} *</label>
                    <input 
                      type="text" 
                      class="form-control" 
                      id="civilId" 
                      formControlName="civilId"
                      [class.is-invalid]="isFieldInvalid('civilId')"
                      placeholder="{{ 'REGISTRATION.ENTER_CIVIL_ID' | translate }}">
                    <div class="invalid-feedback" *ngIf="isFieldInvalid('civilId')">
                      {{ getFieldError('civilId') }}
                    </div>
                  </div>
                </div>
                    <div class="col-xl-6">
                  <div class="mb-4">
                    <label for="countryId" class="form-label">{{ 'REGISTRATION.COUNTRY' | translate }}</label>
                    <ng-select 
                      id="countryId"
                      formControlName="countryId"
                      [class.is-invalid]="isFieldInvalid('countryId')"
                      [placeholder]="'REGISTRATION.SELECT_COUNTRY' | translate"
                      [items]="countries"
                      bindLabel="text"
                      bindValue="id"
                      [loading]="countriesLoading"
                      (scrollToEnd)="onCountriesScrollToEnd()">
                    </ng-select>
                    <div class="invalid-feedback" *ngIf="isFieldInvalid('countryId')">
                      {{ getFieldError('countryId') }}
                    </div>
                  </div>
                </div>
                 <div class="col-xl-6">
                  <div class="mb-4">
                    <label for="entityId" class="form-label">{{ 'REGISTRATION.ENTITY' | translate }} *</label>
                    <ng-select 
                      id="entityId"
                      formControlName="entityId"
                      [class.is-invalid]="isFieldInvalid('entityId')"
                      [placeholder]="'REGISTRATION.SELECT_ENTITY' | translate"
                      [items]="entities"
                      bindLabel="text"
                      bindValue="id"
                      [loading]="entitiesLoading"
                      (scrollToEnd)="onEntitiesScrollToEnd()">
                    </ng-select>
                    <div class="invalid-feedback" *ngIf="isFieldInvalid('entityId')">
                      {{ getFieldError('entityId') }}
                    </div>
                  </div>
                </div>
              </div>

            </div>

            <!-- Contact Information -->
            <div class="login-box mb-4">
              <h2 class="title gold mb-4">{{ 'REGISTRATION.CONTACT_INFO' | translate }}</h2>
              <div class="row">
                <div class="col-xl-6">
                  <div class="mb-4">
                    <label for="email" class="form-label">{{ 'REGISTRATION.EMAIL' | translate }} *</label>
                    <input 
                      type="email" 
                      class="form-control" 
                      id="email" 
                      formControlName="email"
                      [class.is-invalid]="isFieldInvalid('email')"
                      placeholder="{{ 'REGISTRATION.ENTER_EMAIL' | translate }}">
                    <div class="invalid-feedback" *ngIf="isFieldInvalid('email')">
                      {{ getFieldError('email') }}
                    </div>
                  </div>
                </div>
                <div class="col-xl-6">
                  <div class="mb-4">
                    <label for="phoneNumber" class="form-label">{{ 'REGISTRATION.MOBILE' | translate }} *</label>
                    <input 
                      type="tel" 
                      class="form-control" 
                      id="phoneNumber" 
                      formControlName="phoneNumber"
                      [class.is-invalid]="isFieldInvalid('phoneNumber')"
                      placeholder="{{ 'REGISTRATION.ENTER_MOBILE' | translate }}">
                    <div class="invalid-feedback" *ngIf="isFieldInvalid('phoneNumber')">
                      {{ getFieldError('phoneNumber') }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-xl-6">
                  <div class="mb-4">
                    <label for="telNumber" class="form-label">{{ 'REGISTRATION.TELEPHONE' | translate }}</label>
                    <input 
                      type="tel" 
                      class="form-control" 
                      id="telNumber" 
                      formControlName="telNumber"
                      [class.is-invalid]="isFieldInvalid('telNumber')"
                      placeholder="{{ 'REGISTRATION.ENTER_TELEPHONE' | translate }}">
                    <div class="invalid-feedback" *ngIf="isFieldInvalid('telNumber')">
                      {{ getFieldError('telNumber') }}
                    </div>
                  </div>
                </div>
             
            
                <div class="col-xl-6">
                  <div class="mb-4">
                    <label for="cityId" class="form-label">{{ 'REGISTRATION.CITY' | translate }} *</label>
                    <ng-select 
                      id="cityId"
                      formControlName="cityId"
                      [class.is-invalid]="isFieldInvalid('cityId')"
                      [placeholder]="'REGISTRATION.SELECT_CITY' | translate"
                      [items]="cities"
                      bindLabel="text"
                      bindValue="id"
                      [loading]="citiesLoading"
                      (scrollToEnd)="onCitiesScrollToEnd()">
                    </ng-select>
                    <div class="invalid-feedback" *ngIf="isFieldInvalid('cityId')">
                      {{ getFieldError('cityId') }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-xl-8">
                  <div class="mb-4">
                    <label for="address" class="form-label">{{ 'REGISTRATION.ADDRESS' | translate }} *</label>
                    <textarea 
                      class="form-control" 
                      id="address" 
                      rows="3"
                      formControlName="address"
                      [class.is-invalid]="isFieldInvalid('address')"
                      placeholder="{{ 'REGISTRATION.ENTER_ADDRESS' | translate }}"></textarea>
                    <div class="invalid-feedback" *ngIf="isFieldInvalid('address')">
                      {{ getFieldError('address') }}
                    </div>
                  </div>
                </div>
                <div class="col-xl-4">
                  <div class="mb-4">
                    <label for="poBox" class="form-label">{{ 'REGISTRATION.PO_BOX' | translate }}</label>
                    <input 
                      type="text" 
                      class="form-control" 
                      id="poBox" 
                      formControlName="poBox"
                      [class.is-invalid]="isFieldInvalid('poBox')"
                      placeholder="{{ 'REGISTRATION.ENTER_PO_BOX' | translate }}">
                    <div class="invalid-feedback" *ngIf="isFieldInvalid('poBox')">
                      {{ getFieldError('poBox') }}
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Documents -->
            <div class="login-box mb-4" *ngIf="attachmentConfigs.length > 0">
              <h2 class="title gold mb-4">{{ 'REGISTRATION.DOCUMENTS' | translate }}</h2>
              
              <div class="row" *ngFor="let config of attachmentConfigs">
                <div class="col-xl-12">
                  <div class="mb-4">
                    <label class="form-label">
                      {{ getAttachmentDisplayName(config) }}
                      <span class="text-danger" *ngIf="isAttachmentRequired(config)">*</span>
                    </label>
                    
                    <!-- File Upload Area -->
                    <div class="upload-area" 
                         [class.has-file]="selectedFiles[config.id]"
                         [class.is-invalid]="isAttachmentRequired(config) && !selectedFiles[config.id] && submitted">
                      
                      <div class="upload-content" *ngIf="!selectedFiles[config.id]">
                        <div class="upload-icon">
                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <g clip-path="url(#clip0_206_15001)">
                              <path d="M18.4001 7.37889C18.2192 7.32729 18.0541 7.23128 17.9198 7.09959C17.7855 6.9679 17.6862 6.80472 17.6311 6.62489C17.3248 5.58693 16.8112 4.6219 16.1213 3.78818C15.4313 2.95447 14.5793 2.2694 13.617 1.77445C12.6546 1.27949 11.6018 0.984934 10.5223 0.908599C9.44286 0.832265 8.3591 0.975741 7.33666 1.33034C6.31422 1.68495 5.37436 2.24331 4.57394 2.97163C3.77352 3.69996 3.1292 4.58311 2.67995 5.56764C2.2307 6.55218 1.98588 7.61762 1.96029 8.6995C1.9347 9.78139 2.12888 10.8572 2.53107 11.8619C2.62347 12.0733 2.64336 12.3094 2.58766 12.5333C2.53195 12.7572 2.40377 12.9564 2.22307 13.0999C1.4268 13.6909 0.805119 14.4862 0.423825 15.4015C0.0425303 16.3169 -0.0841907 17.3184 0.0570735 18.2999C0.277527 19.6268 0.966398 20.8306 1.99866 21.693C3.03091 22.5553 4.33814 23.019 5.68307 22.9999H11.0001C11.2653 22.9999 11.5196 22.8945 11.7072 22.707C11.8947 22.5195 12.0001 22.2651 12.0001 21.9999C12.0001 21.7347 11.8947 21.4803 11.7072 21.2928C11.5196 21.1052 11.2653 20.9999 11.0001 20.9999H5.68307C4.81935 21.0208 3.9767 20.7317 3.30783 20.1848C2.63897 19.6379 2.18815 18.8696 2.03707 18.0189C1.94127 17.3936 2.01891 16.7541 2.26155 16.1699C2.50418 15.5857 2.90249 15.0793 3.41307 14.7059C3.94939 14.3051 4.33736 13.7374 4.51601 13.0921C4.69466 12.4468 4.65388 11.7605 4.40007 11.1409C3.89823 9.81559 3.87242 8.35711 4.32707 7.01489C4.69027 5.96346 5.34066 5.03477 6.20456 4.334C7.06846 3.63323 8.11134 3.18839 9.21507 3.04989C9.47109 3.01693 9.72894 3.00023 9.98707 2.99989C11.2801 2.99562 12.5398 3.41032 13.5774 4.18188C14.6151 4.95344 15.3749 6.04036 15.7431 7.27989C15.8868 7.75226 16.1458 8.18146 16.4966 8.52884C16.8475 8.87623 17.2793 9.13089 17.7531 9.26989C18.9126 9.61281 19.9396 10.3018 20.6968 11.2445C21.4539 12.1873 21.905 13.3388 21.9896 14.545C22.0742 15.7511 21.7883 16.9544 21.1702 17.9936C20.5522 19.0328 19.6313 19.8584 18.5311 20.3599C18.3682 20.4433 18.2321 20.5707 18.1382 20.7277C18.0443 20.8847 17.9965 21.065 18.0001 21.2479C17.9981 21.4134 18.0378 21.5767 18.1154 21.7228C18.193 21.869 18.3061 21.9933 18.4442 22.0844C18.5824 22.1755 18.7412 22.2304 18.9061 22.2441C19.071 22.2578 19.2368 22.2299 19.3881 22.1629C23.5221 20.1759 25.7681 14.9489 22.2681 9.89889C21.3044 8.64181 19.9394 7.75251 18.4001 7.37889Z" fill="#8D734D" />
                              <path d="M18.7074 16.7065C18.8949 16.519 19.0002 16.2646 19.0002 15.9995C19.0002 15.7343 18.8949 15.48 18.7074 15.2925L17.1214 13.7065C16.5588 13.1441 15.7959 12.8281 15.0004 12.8281C14.2049 12.8281 13.442 13.1441 12.8794 13.7065L11.2934 15.2925C11.1112 15.4811 11.0105 15.7337 11.0127 15.9959C11.015 16.2581 11.1202 16.5089 11.3056 16.6943C11.491 16.8797 11.7418 16.9849 12.004 16.9872C12.2662 16.9894 12.5188 16.8886 12.7074 16.7065L14.0004 15.4135V22.9995C14.0004 23.2647 14.1058 23.5191 14.2933 23.7066C14.4808 23.8941 14.7352 23.9995 15.0004 23.9995C15.2656 23.9995 15.52 23.8941 15.7075 23.7066C15.8951 23.5191 16.0004 23.2647 16.0004 22.9995V15.4135L17.2934 16.7065C17.4809 16.894 17.7352 16.9993 18.0004 16.9993C18.2656 16.9993 18.5199 16.894 18.7074 16.7065Z" fill="#8D734D" />
                            </g>
                            <defs>
                              <clipPath id="clip0_206_15001">
                                <rect width="24" height="24" fill="white" />
                              </clipPath>
                            </defs>
                          </svg>
                        </div>
                        <p class="mb-2">
                          <span class="font-semibold">{{ 'REGISTRATION.CLICK_TO_UPLOAD' | translate }}</span>
                        </p>
                        <p class="mb-0">{{ 'REGISTRATION.FILE_TYPES' | translate }}</p>
                        <input 
                          type="file" 
                          [id]="'file-' + config.id"
                          class="file-input" 
                          (change)="onFileSelected($event, config.id)"
                          accept=".jpg,.jpeg,.png,.gif,.pdf">
                      </div>

                      <!-- File Preview -->
                      <div class="uploaded-file" *ngIf="selectedFiles[config.id]">
                        <div class="d-flex gap-2">
                          <img [src]="filePreviews[config.id]" alt="File preview" class="file-preview" />
                          <div>
                            <p class="black mb-0">{{ selectedFiles[config.id].name }}</p>
                            <p class="gray mb-0">{{ (selectedFiles[config.id].size / 1024).toFixed(1) }} KB</p>
                          </div>
                        </div>
                        <button type="button" class="btn-remove-uploaded-file" (click)="removeFile(config.id)">
                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M21 4H17.9C17.6679 2.87141 17.0538 1.85735 16.1613 1.12872C15.2687 0.40009 14.1522 0.00145452 13 0L11 0C9.8478 0.00145452 8.73132 0.40009 7.83875 1.12872C6.94618 1.85735 6.3321 2.87141 6.1 4H3C2.73478 4 2.48043 4.10536 2.29289 4.29289C2.10536 4.48043 2 4.73478 2 5C2 5.26522 2.10536 5.51957 2.29289 5.70711C2.48043 5.89464 2.73478 6 3 6H4V19C4.00159 20.3256 4.52888 21.5964 5.46622 22.5338C6.40356 23.4711 7.67441 23.9984 9 24H15C16.3256 23.9984 17.5964 23.4711 18.5338 22.5338C19.4711 21.5964 19.9984 20.3256 20 19V6H21C21.2652 6 21.5196 5.89464 21.7071 5.70711C21.8946 5.51957 22 5.26522 22 5C22 4.73478 21.8946 4.48043 21.7071 4.29289C21.5196 4.10536 21.2652 4 21 4ZM11 2H13C13.6203 2.00076 14.2251 2.19338 14.7316 2.55144C15.2381 2.90951 15.6214 3.41549 15.829 4H8.171C8.37858 3.41549 8.7619 2.90951 9.26839 2.55144C9.77487 2.19338 10.3797 2.00076 11 2ZM18 19C18 19.7956 17.6839 20.5587 17.1213 21.1213C16.5587 21.6839 15.7956 22 15 22H9C8.20435 22 7.44129 21.6839 6.87868 21.1213C6.31607 20.5587 6 19.7956 6 19V6H18V19Z" fill="#5B5B5B" />
                            <path d="M10 18C10.2652 18 10.5196 17.8946 10.7071 17.7071C10.8946 17.5196 11 17.2652 11 17V11C11 10.7348 10.8946 10.4804 10.7071 10.2929C10.5196 10.1054 10.2652 10 10 10C9.73478 10 9.48043 10.1054 9.29289 10.2929C9.10536 10.4804 9 10.7348 9 11V17C9 17.2652 9.10536 17.5196 9.29289 17.7071C9.48043 17.8946 9.73478 18 10 18Z" fill="#5B5B5B" />
                            <path d="M14 18C14.2652 18 14.5196 17.8946 14.7071 17.7071C14.8947 17.5196 15 17.2652 15 17V11C15 10.7348 14.8947 10.4804 14.7071 10.2929C14.5196 10.1054 14.2652 10 14 10C13.7348 10 13.4804 10.1054 13.2929 10.2929C13.1054 10.4804 13 10.7348 13 11V17C13 17.2652 13.1054 17.5196 13.2929 17.7071C13.4804 17.8946 13.7348 18 14 18Z" fill="#5B5B5B" />
                          </svg>
                        </button>
                      </div>
                    </div>
                    
                    <div class="invalid-feedback" *ngIf="isAttachmentRequired(config) && !selectedFiles[config.id] && submitted">
                      {{ 'REGISTRATION.ATTACHMENT_REQUIRED' | translate }}
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Create Password -->
            <div class="login-box mb-4">
              <h2 class="title gold mb-4">{{ 'REGISTRATION.CREATE_PASSWORD' | translate }}</h2>
              <div class="row">
                <div class="col-xl-6">
                  <div class="mb-4">
                    <label for="password" class="form-label">{{ 'REGISTRATION.ENTER_PASSWORD' | translate }} *</label>
                    <input 
                      type="password" 
                      class="form-control" 
                      id="password" 
                      formControlName="password"
                      [class.is-invalid]="isFieldInvalid('password')"
                      placeholder="{{ 'REGISTRATION.ENTER_PASSWORD' | translate }}">
                    <div class="invalid-feedback" *ngIf="isFieldInvalid('password')">
                      {{ getFieldError('password') }}
                    </div>
                  </div>
                </div>
                <div class="col-xl-6">
                  <div class="mb-4">
                    <label for="confirmPassword" class="form-label">{{ 'REGISTRATION.CONFIRM_PASSWORD' | translate }} *</label>
                    <input 
                      type="password" 
                      class="form-control" 
                      id="confirmPassword" 
                      formControlName="confirmPassword"
                      [class.is-invalid]="isFieldInvalid('confirmPassword')"
                      placeholder="{{ 'REGISTRATION.CONFIRM_PASSWORD' | translate }}">
                    <div class="invalid-feedback" *ngIf="isFieldInvalid('confirmPassword')">
                      {{ getFieldError('confirmPassword') }}
                    </div>
                    <div class="valid-feedback" *ngIf="showPasswordMatch()">
                      {{ 'REGISTRATION.PASSWORDS_MATCH' | translate }}
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Submit Buttons -->
            <div class="d-flex gap-4 mt-5">
              <button 
                type="submit" 
                class="btn btn-gold w-50" 
                [disabled]="isLoading">
                <span *ngIf="!isLoading">{{ 'REGISTRATION.CREATE_ACCOUNT' | translate }}</span>
                <span *ngIf="isLoading">{{ 'REGISTRATION.CREATING' | translate }}</span>
              </button>
              <button 
                type="button" 
                class="btn btn-gray w-50" 
                routerLink="/login">
                {{ 'REGISTRATION.CANCEL' | translate }}
              </button>
            </div>

          </form>
        </div>
      </div>
    </div>
  </section>
</div>
